<div class="modal-overlay">
    <div class="modal-content">
        <h4>Two-Factor Authentication</h4>
        <p>Enter the 6-digit 2FA code sent to your email:</p>
        <InputText @bind-Value="TwoFactorCode" class="form-control" placeholder="Enter 2FA Code" />
        <div class="mt-3 d-grid gap-2">
            <button type="button" class="btn btn-primary" @onclick="SubmitCode">Submit</button>
            <button type="button" class="btn btn-secondary" @onclick="CloseModal">Cancel</button>
        </div>
        <span class="text-danger">@ErrorMessage</span>
    </div>
</div>

@code {
    [Parameter] public EventCallback<string> OnSubmit { get; set; } // Submit callback
    [Parameter] public EventCallback OnClose { get; set; }         // Close callback
    [Parameter] public string? ErrorMessage { get; set; }          // Error message passed from parent

    private string TwoFactorCode { get; set; } = string.Empty;

    private async Task SubmitCode()
    {
        // Trigger the parent Submit callback and pass the 2FA code
        await OnSubmit.InvokeAsync(TwoFactorCode);
    }

    private async Task CloseModal()
    {
        // Trigger the parent Close callback
        await OnClose.InvokeAsync();
    }
}
