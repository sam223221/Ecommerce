@page "/"
@rendermode InteractiveServer
@inject IProductService ProductService

<div class="home-container">
    <!-- Landing Section -->
    <div class="landing-page">
        <div>
            <div class="overlay-content">
                <div class="title">EXPLORE OUR</div>
                <div class="subtitle">BROAD SELECTION OF ELECTRONICS</div>
            </div>
            <div class="promotion-text">
                <b>-5% DISCOUNT</b> ON ALL ORDERS BEFORE 31.12.2024 <br />
                USE CODE <b>“NEW YEAR"</b>
            </div>
        </div>
    </div>
    @if (!IsMiniCartVisible)
    {
    <button class="cart-icon-button" @onclick="ToggleMiniCart">
        <img src="assets/cartmini.png" alt="Cart" class="cart-icon" />
    </button>    
    }

    <!-- Shopping Cart Section -->
    @if (IsMiniCartVisible)
    {
        <div class="shopping-cart-container">
            <button class="close-cart-button" @onclick="ToggleMiniCart">X</button>
            <MiniCartComponent />
        </div>
    }

    <!-- Products Section -->
    <div class="landing-bg-container">
        <div class="spacer"></div>

        <section class="products-bars">
            <!-- Best Seller -->
            <div class="products-block3">
                <div class="products-thumbnail3">
                    <div class="thumbnail">OUR BESTSELLERS</div>
                </div>
                <ComponentproductSlider gaming="@bestSeller" />
            </div>
        </section>

        <div class="spacer"></div>

        <section class="products-bars">
            <div class="products-block2">
                <div class="products-thumbnail2">
                    <div class="thumbnail">KEYBOARDS</div>
                </div>
                <ComponentproductSlider gaming="@keyboards" />
            </div>
        </section>

        <div class="spacer"></div>

        <section class="products-bars">
            <div class="products-block2">
                <div class="products-thumbnail3">
                    <div class="thumbnail">GAMING</div>
                </div>
                <ComponentproductSlider gaming="@gaming" />
            </div>
        </section>

        <div class="spacer"></div>

        <!-- Ad Section -->
        <section class="ad-section">
            <div class="ad-photo">
                <img src="assets/landingpage-desk.png" />
            </div>
            <div class="ad-text-rectangle">
                <div class="ad-text">
                    With our broad selection of premium gaming accessories, you can build the ultimate setup for unmatched comfort and performance.
                    From high-quality headphones and responsive keyboards to precise mice and vibrant monitors,
                    we have everything you need to elevate your gaming experience.
                    Discover gear that brings out your best in every game!
                </div>
            </div>
        </section>
        <div class="spacer"></div>
    </div>
</div>

@code {
    public IEnumerable<Product> Products = new List<Product>();
    public List<Product> bestSeller = new List<Product>();
    public List<Product> keyboards = new List<Product>();
    public List<Product> gaming = new List<Product>();

    protected override async Task OnInitializedAsync()
    {
        Products = await ProductService.GetAllProductsExecuteAsync();
        bestSeller = Products.ToList();
        keyboards = Products.Where(p => p.ProductName.Contains("keyboard", StringComparison.OrdinalIgnoreCase)).ToList();
        gaming = Products.Where(p => p.ProductName.Contains("gaming", StringComparison.OrdinalIgnoreCase)).ToList();
    }

    private bool IsMiniCartVisible = false;

    private void ToggleMiniCart()
    {
        IsMiniCartVisible = !IsMiniCartVisible;
    }
}

<style>

    .shopping-cart-container {
        position: fixed;
        right: 0;
        top: 100px;
        width: 350px;
        background-color: #f9f9f9;
        border-left: 1px solid #ddd;
        padding: 15px;
        box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        height: calc(100vh - 100px);
        overflow-y: auto;
    }

    .cart-icon-button {
        position: fixed;
        bottom: 20px; /* Adjust this to move the icon up or down */
        right: 20px; /* Adjust this to move the icon left or right */
        background-color: #2f27ce; /* Background color for the button */
        border: none;
        border-radius: 50%; /* Make it circular */
        padding: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        width: 90px;
        height: 90px;
        z-index: 1100; /* Ensure it appears on top of other elements */
        transition: transform 0.3s ease, background-color 0.3s ease;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
    }

        .cart-icon-button:hover {
            transform: scale(1.2); /* Slight zoom effect on hover */
            background-color: #433bff; /* Darker background on hover */
        }

    .cart-icon {
        width: 90%; /* Increase image size relative to the button */
        height: 90%; /* Maintain aspect ratio inside the button */
        object-fit: contain;
        transform: scale(1.2); /* Scale the image slightly larger */
        transition: transform 0.3s ease; /* Smooth scaling */
    }

    .cart-icon-button:hover .cart-icon {
        transform: scale(1.3); 
    }

    .close-cart-button {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 30px;
        height: 30px;
        background-color: #ff4d4d; /* Red background */
        border: none;
        border-radius: 50%; /* Make it circular */
        color: white;
        font-size: 16px;
        font-weight: bold;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        transition: transform 0.3s ease, background-color 0.3s ease;
    }

        .close-cart-button:hover {
            background-color: #ff3333; /* Slightly darker red on hover */
            transform: scale(1.1); /* Slight zoom effect */
        }

</style>
