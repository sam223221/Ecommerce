@page "/"


@rendermode InteractiveServer
@inject IProductService ProductService


<div class="landing-page">
    <div>
         <div class="overlay-content">
        <div class="title">EXPLORE OUR</div>
        <div class="subtitle">BROAD SELECTION OF ELECTRONICS</div>
    </div>
        <div class="promotion-text">
            <b>-5% DISCOUNT</b> ON ALL ORDERS BEFORE 31.12.2024 <br />
            USE CODE <b>“NEW YEAR"</b>
        </div>
    </div>
</div>
<div class="landing-bg-container">
<div class="spacer"/>

<section class="products-bars">
    
    <!-- best seller -->
    <div class="products-block3">
        <div class="products-thumbnail3">
            <div class="thumbnail">OUR BESTSELLERS</div>
        </div>
            @foreach(var item in bestSeller)
            {
            <div class="item-container">
                <div class="item-image">
                        <img class="item-image" src="@item.ImageUrl" />
                </div>
                <div class="item-info">
                    <div class="item-name">
                        <a>@item.ProductName</a>
                    </div>
                    <div class="item-price">
                        @item.Price Dkk
                    </div>
                </div>
            </div>
            }
    </div>

</section>

 <div class="spacer"/>

    <section class="products-bars">
        <div class="products-block2">
            <div class="products-thumbnail2">
                <div class="thumbnail">KEYBOARDS</div>
            </div>

            <div class="products-block">
                <!-- Left Arrow Button -->
                <button class="slider-arrow-button slider-left-arrow" @onclick="@(() => ScrollLeft(keyboarElementReference))">
                    ←
                </button>

                <div class="slider-container">
                    <div class="slider-products-block" @ref="keyboarElementReference">
                        @foreach (var item in keyboards)
                        {
                            <div class="item-container">
                                <div class="item-image">
                                    <img class="item-image" src="@item.ImageUrl" />
                                </div>
                                <div class="item-info">
                                    <div class="item-name">
                                        @item.ProductName
                                    </div>
                                    <div class="item-price">
                                        @item.Price Dkk
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- Right Arrow Button -->
                <button class="slider-arrow-button slider-right-arrow" @onclick="@(() => ScrollRight(keyboarElementReference))">
                    →
                </button>
            </div>
        </div>
    </section>

 <div class="spacer"/>

<section class="products-bars">

    <div class="products-block2">
        <div class="products-thumbnail2">
            <div class="thumbnail">GAMING</div>
        </div>
            <div class="products-block">
                <!-- Left Arrow Button -->
                <button class="slider-arrow-button slider-left-arrow" @onclick="@(() => ScrollLeft(gamingelEmentReference))">
                    ←
                </button>

                <div class="slider-container">
                    <div class="slider-products-block" @ref="gamingelEmentReference">
                        @foreach (var item in gaming)
                        {
                            <div class="item-container">
                                <div class="item-image">
                                    <img class="item-image" src="@item.ImageUrl" />
                                </div>
                                <div class="item-info">
                                    <div class="item-name">
                                        @item.ProductName
                                    </div>
                                    <div class="item-price">
                                        @item.Price Dkk
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>

                <!-- Right Arrow Button -->
                <button class="slider-arrow-button slider-right-arrow" @onclick="@(() => ScrollRight(gamingelEmentReference))">
                    →
                </button>
            </div>
    </div>
</section>

 <div class="spacer"/>


<section class="ad-section">
    <div class="ad-photo">
        <img src="assets/landingpage-desk.png"/>
    </div>
    <div class="ad-text-rectangle">
        <div class="ad-text">
            With our broad selection of premium gaming accessories, you can build the ultimate setup for unmatched comfort and performance. 
            From high-quality headphones and responsive keyboards to precise mice and vibrant monitors, 
            we have everything you need to elevate your gaming experience. 
            Discover gear that brings out your best in every game!
        </div>
    </div>
</section>

 <div class="spacer"/>
 </div>

 @code 
{
    public IEnumerable<Product> Products = new List<Product>();
    public List<Product> bestSeller = new List<Product>();
    public List<Product> keyboards = new List<Product>();
    public List<Product> gaming = new List<Product>();
    [Inject]
    public IJSRuntime JSRuntime { get; set; }
    private IJSObjectReference Module { get; set; }
    private ElementReference gamingelEmentReference;
    private ElementReference keyboarElementReference;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            Module = await JSRuntime.InvokeAsync<IJSObjectReference>("import", "./js/JavaScripts.js");
        }
    }


    private void ScrollLeft(ElementReference element)
    {
        if (Module != null)
        {
            Module.InvokeVoidAsync("scrollLeft", element);
        }
    }

    private void ScrollRight(ElementReference element)
    {
        if (Module != null)
        {
            Module.InvokeVoidAsync("scrollRight", element);
        }
    }
    protected override async Task OnInitializedAsync()
    {
        Products = await ProductService.GetAllProductsExecuteAsync();
        bestSeller = Products.Take(4).ToList();
        keyboards = Products.Where(p => p.ProductName.Contains("keyboard", StringComparison.OrdinalIgnoreCase)).ToList();
        gaming = Products.Where(p => p.ProductName.Contains("gaming", StringComparison.OrdinalIgnoreCase)).ToList();
    }
    
 }


